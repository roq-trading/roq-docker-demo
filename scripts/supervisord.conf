[supervisord]
nodaemon=true
logfile=/dev/null
logfile_maxbytes=0

[inet_http_server]
port=:9001

[program:deribit]
autorestart=unexpected
exitcodes=0
; environment=ROQ_v=1
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
command=/usr/local/bin/roq-launch.sh roq-deribit test
	--name deribit
	--config_file /etc/roq/deribit.toml
	--secrets_file /etc/roq/secrets.toml
	--client_listen_address /run/roq/deribit.sock
	--cache_dir /var/lib/roq

[program:fix-bridge]
autorestart=unexpected
exitcodes=0
; environment=ROQ_v=1
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
command=/usr/local/bin/roq-launch.sh roq-fix-bridge test
	--name fix-bridge
	--config_file /etc/roq/fix-bridge.toml
	--client_listen_address 1234
	/run/roq/deribit.toml
